generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id    	 		String  @id @default(cuid())
  email 	 		String  @unique
  name  	 		String?
  password 		String

	incomes     Income[]
	allocations Allocation[]
	colors      AllocationColor[]

	@@map("user")
}

model Income {
	id 		 String    @id @default(cuid())
	title  String
	amount Int
	date 	 DateTime?
	user 	 User 		 @relation(fields: [userId], references: [id])
	userId String    @map("user_id")

	@@map("income")
}

model Allocation {
	id 				 String  @id @default(cuid())
	title  		 String
	percentage Int
	required 	 Boolean 					@default(false)
	color      AllocationColor @relation(fields: [colorId], references: [id])
  colorId    String 					@map("color_id")
	user 			 User 	 					@relation(fields: [userId], references: [id])
	userId 		 String  					@map("user_id")

	@@map("allocation")
}

model AllocationColor {
  id     			String @id @default(cuid())
  name   			String
  value  			String
  user   			User   @relation(fields: [userId], references: [id])
  userId 			String @map("user_id")
	allocations Allocation[]

  @@map("allocation_color")
}